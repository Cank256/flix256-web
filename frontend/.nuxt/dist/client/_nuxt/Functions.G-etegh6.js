import{s as N,x as E,y as x,z as H,A as R,B as Z,C as q,D as G,E as P,G as y,H as J,r as j,u as Y,f as Q,I as X,J as K,o as _,c as w,b as ee,w as te,a as b,g as ie,t as L,K as re,h as C}from"./entry.vVFzJHlF.js";import{_ as se}from"./nuxt-link.HmH_W_nj.js";import{a as h}from"./axios.dHanLt5T.js";import{_ as oe}from"./_plugin-vue_export-helper.x3n3nnut.js";async function ne(e,t){return await ae(t).catch(i=>(console.error("Failed to get image meta for "+t,i+""),{width:0,height:0,ratio:0}))}async function ae(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const i=new Image;i.onload=()=>{const s={width:i.width,height:i.height,ratio:i.width/i.height};t(s)},i.onerror=s=>r(s),i.src=e})}function U(e){return t=>t?e[t]||t:e.missingValue}function de({formatter:e,keyMap:t,joinWith:r="/",valueMap:i}={}){e||(e=(o,n)=>`${o}=${n}`),t&&typeof t!="function"&&(t=U(t));const s=i||{};return Object.keys(s).forEach(o=>{typeof s[o]!="function"&&(s[o]=U(s[o]))}),(o={})=>Object.entries(o).filter(([d,c])=>typeof c<"u").map(([d,c])=>{const l=s[d];return typeof l=="function"&&(c=l(o[d])),d=typeof t=="function"?t(d):d,e(d,c)}).join(r)}function g(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return parseInt(e,10)}function ce(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const r of e.split(" ")){const i=parseInt(r.replace("x",""));i&&t.add(i)}return Array.from(t)}function le(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function ue(e){const t={};if(typeof e=="string")for(const r of e.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?t["1px"]=i[0].trim():t[i[0].trim()]=i[1].trim()}else Object.assign(t,e);return t}function me(e){const t={options:e},r=(s,o={})=>V(t,s,o),i=(s,o={},n={})=>r(s,{...n,modifiers:R(o,n.modifiers||{})}).url;for(const s in e.presets)i[s]=(o,n,d)=>i(o,n,{...e.presets[s],...d});return i.options=e,i.getImage=r,i.getMeta=(s,o)=>fe(t,s,o),i.getSizes=(s,o)=>ve(t,s,o),t.$img=i,i}async function fe(e,t,r){const i=V(e,t,{...r});return typeof i.getMeta=="function"?await i.getMeta():await ne(e,i.url)}function V(e,t,r){var l,u;if(typeof t!="string"||t==="")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(t.startsWith("data:"))return{url:t};const{provider:i,defaults:s}=he(e,r.provider||e.options.provider),o=ge(e,r.preset);if(t=N(t)?t:E(t),!i.supportsAlias)for(const v in e.options.alias)t.startsWith(v)&&(t=x(e.options.alias[v],t.substr(v.length)));if(i.validateDomains&&N(t)){const v=H(t).host;if(!e.options.domains.find(I=>I===v))return{url:t}}const n=R(r,o,s);n.modifiers={...n.modifiers};const d=n.modifiers.format;(l=n.modifiers)!=null&&l.width&&(n.modifiers.width=g(n.modifiers.width)),(u=n.modifiers)!=null&&u.height&&(n.modifiers.height=g(n.modifiers.height));const c=i.getImage(t,n,e);return c.format=c.format||d||"",c}function he(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function ge(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function ve(e,t,r){var f,z,$,k,T;const i=g((f=r.modifiers)==null?void 0:f.width),s=g((z=r.modifiers)==null?void 0:z.height),o=ue(r.sizes),n=($=r.densities)!=null&&$.trim()?ce(r.densities.trim()):e.options.densities;le(n);const d=i&&s?s/i:0,c=[],l=[];if(Object.keys(o).length>=1){for(const m in o){const p=W(m,String(o[m]),s,d,e);if(p!==void 0){c.push({size:p.size,screenMaxWidth:p.screenMaxWidth,media:`(max-width: ${p.screenMaxWidth}px)`});for(const S of n)l.push({width:p._cWidth*S,src:F(e,t,r,p,S)})}}pe(c)}else for(const m of n){const p=Object.keys(o)[0];let S=W(p,String(o[p]),s,d,e);S===void 0&&(S={size:"",screenMaxWidth:0,_cWidth:(k=r.modifiers)==null?void 0:k.width,_cHeight:(T=r.modifiers)==null?void 0:T.height}),l.push({width:m,src:F(e,t,r,S,m)})}_e(l);const u=l[l.length-1],v=c.length?c.map(m=>`${m.media?m.media+" ":""}${m.size}`).join(", "):void 0,I=v?"w":"x",a=l.map(m=>`${m.src} ${m.width}${I}`).join(", ");return{sizes:v,srcset:a,src:u==null?void 0:u.src}}function W(e,t,r,i,s){const o=s.options.screens&&s.options.screens[e]||parseInt(e),n=t.endsWith("vw");if(!n&&/^\d+$/.test(t)&&(t=t+"px"),!n&&!t.endsWith("px"))return;let d=parseInt(t);if(!o||!d)return;n&&(d=Math.round(d/100*o));const c=i?Math.round(d*i):r;return{size:t,screenMaxWidth:o,_cWidth:d,_cHeight:c}}function F(e,t,r,i,s){return e.$img(t,{...r.modifiers,width:i._cWidth?i._cWidth*s:void 0,height:i._cHeight?i._cHeight*s:void 0},r)}function pe(e){var r;e.sort((i,s)=>i.screenMaxWidth-s.screenMaxWidth);let t=null;for(let i=e.length-1;i>=0;i--){const s=e[i];s.media===t&&e.splice(i,1),t=s.media}for(let i=0;i<e.length;i++)e[i].media=((r=e[i+1])==null?void 0:r.media)||""}function _e(e){e.sort((r,i)=>r.width-i.width);let t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.width===t&&e.splice(r,1),t=i.width}}const ye=de({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>q(e)+"_"+q(t)}),we=(e,{modifiers:t={},baseURL:r}={},i)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const s=ye(t)||"_";return r||(r=x(i.options.nuxt.baseURL,"/_ipx")),{url:x(r,s,Z(e))}},Se=!0,be=!0,Ie=Object.freeze(Object.defineProperty({__proto__:null,getImage:we,supportsAlias:be,validateDomains:Se},Symbol.toStringTag,{value:"Module"})),B={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};B.providers={ipxStatic:{provider:Ie,defaults:{}}};const D=()=>{const e=G(),t=P();return t.$img||t._img||(t._img=me({...B,nuxt:{baseURL:e.app.baseURL}}))},Ce={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},densities:{type:String,default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],default:void 0}},xe=e=>{const t=y(()=>({provider:e.provider,preset:e.preset})),r=y(()=>({width:g(e.width),height:g(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),i=D(),s=y(()=>({...e.modifiers,width:g(e.width),height:g(e.height),format:e.format,quality:e.quality||i.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:s}},Me={...Ce,placeholder:{type:[Boolean,String,Number,Array],default:void 0}},ze=J({name:"NuxtImg",props:Me,emits:["load","error"],setup:(e,t)=>{const r=D(),i=xe(e),s=j(!1),o=y(()=>r.getSizes(e.src,{...i.options.value,sizes:e.sizes,densities:e.densities,modifiers:{...i.modifiers.value,width:g(e.width),height:g(e.height)}})),n=y(()=>{const a={...i.attrs.value,"data-nuxt-img":""};return(!e.placeholder||s.value)&&(a.sizes=o.value.sizes,a.srcset=o.value.srcset),a}),d=y(()=>{let a=e.placeholder;if(a===""&&(a=!0),!a||s.value)return!1;if(typeof a=="string")return a;const f=Array.isArray(a)?a:typeof a=="number"?[a,a]:[10,10];return r(e.src,{...i.modifiers.value,width:f[0],height:f[1],quality:f[2]||50,blur:f[3]||3},i.options.value)}),c=y(()=>e.sizes?o.value.src:r(e.src,i.modifiers.value,i.options.value)),l=y(()=>d.value?d.value:c.value);if(e.preload){const a=Object.values(o.value).every(f=>f);Y({link:[{rel:"preload",as:"image",nonce:e.nonce,...a?{href:o.value.src,imagesizes:o.value.sizes,imagesrcset:o.value.srcset}:{href:l.value}}]})}const u=j(),I=P().isHydrating;return Q(()=>{if(d.value){const a=new Image;a.src=c.value,e.sizes&&(a.sizes=o.value.sizes||"",a.srcset=o.value.srcset),a.onload=f=>{s.value=!0,t.emit("load",f)};return}u.value&&(u.value.complete&&I&&(u.value.getAttribute("data-error")?t.emit("error",new Event("error")):t.emit("load",new Event("load"))),u.value.onload=a=>{t.emit("load",a)},u.value.onerror=a=>{t.emit("error",a)})}),()=>X("img",{ref:u,src:l.value,...n.value,...t.attrs})}});var $e={};const ke={movie:[{title:"Trending Movies",query:"trending"},{title:"Popular Movies",query:"popular"},{title:"Top Rated Movies",query:"top_rated"},{title:"Upcoming Movies",query:"upcoming"},{title:"Now Playing Movies",query:"now_playing"}],tv:[{title:"Trending TV Shows",query:"trending"},{title:"Popular TV Shows",query:"popular"},{title:"Top Rated TV Shows",query:"top_rated"},{title:"Currently Airing TV Shows",query:"on_air"},{title:"TV Shows Airing Today",query:"airing_today"}]},O=$e.tmdbImageUrl||"https://image.tmdb.org/t/p",A=K("backendStore",{state:()=>({}),actions:{getListItem(e,t){const r=ke[e];return r?r.find(i=>i.query===t):void 0},getMovies(e,t){return h.get(`/movies/${e}`,{params:t})},getMovie(e){return h.get(`/movies/${e}`)},getMoviesRecommended(e){return h.get("/movies/recommended",{params:e})},getTvShows(e,t){return h.get(`/tv/${e}`,{params:t})},getTvShow(e){return h.get(`/tv/${e}`)},getTvShowEpisodes(e){return h.get("/tv/episodes",{params:e})},async addFavorite(e){const t=await h.post("/favorite",e),r=await this.getFavorites(e.user_id,{});return localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(r.data.results)),t},getFavorites(e,t){return h.get(`/favorite/${e}`,{params:t})},async deleteFavorite(e,t){const r=await h.delete(`/favorite/${e}/${t}`),i=await this.getFavorites(t,{});return localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(i.data.results)),r},search(e){return h.get("/search",{params:e})}}});var M={};const Te=M.tmdbImageUrl||"https://image.tmdb.org/t/p",Ne={computed:{name(){return this.item.title?this.item.title:this.item.name}}},qe={computed:{stars(){if(this.item.vote_average)return this.item.vote_average*10}}},je={computed:{rating(){if(this.item.vote_average)return this.item.vote_average/2}}},Xe={computed:{runtime(){if(this.item.runtime){const e=Math.floor(this.item.runtime/60),t=this.item.runtime%60;return`${e}h ${t}m`}}}},Ke={computed:{yearStart(){const e=this.item.release_date?this.item.release_date:this.item.first_air_date;if(e)return e.split("-")[0]}}},et={computed:{yearEnd(){const e=this.item.last_air_date;if(e)return e.split("-")[0]}}},tt={computed:{backdrop(){if(this.item.backdrop_path)return`${Te}/original${this.item.backdrop_path}`}}},it={computed:{cert(){if(this.item.release_dates){const e=this.item.release_dates.results.find(r=>r.iso_3166_1===M.API_COUNTRY||r.iso_3166_1==="US");if(!e)return null;const t=e.release_dates.find(r=>r.certification!=="");if(t)return t.certification}else if(this.item.content_ratings){const e=this.item.content_ratings.results.find(t=>t.iso_3166_1===M.API_COUNTRY||t.iso_3166_1==="US");return e?e.rating:null}}}},rt={computed:{trailer(){var t;let e=((t=this.item.videos)==null?void 0:t.results)??[];return!e.length||(e=e.filter(r=>r.type==="Trailer"),!e.length)?null:[{name:e[0].name,src:`https://www.youtube.com/embed/${e[0].key}?rel=0&showinfo=0&autoplay=1`}]}}},st={computed:{directors(){var t;const e=((t=this.item.credits)==null?void 0:t.crew)??[];if(e)return e.filter(r=>r.job==="Director").map(r=>r.name).join(", ")}}},ot={computed:{creators(){const e=this.item.created_by;if(e)return e.map(t=>t.name).join("| ")}}},Le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%209.1371C2%2014%206.01943%2016.5914%208.96173%2018.9109C10%2019.7294%2011%2020.5%2012%2020.5C13%2020.5%2014%2019.7294%2015.0383%2018.9109C17.9806%2016.5914%2022%2014%2022%209.1371C22%204.27416%2016.4998%200.825464%2012%205.50063C7.50016%200.825464%202%204.27416%202%209.1371Z'%20fill='%23fffc'/%3e%3c/svg%3e",Ue="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.96173%2018.9109L9.42605%2018.3219L8.96173%2018.9109ZM12%205.50063L11.4596%206.02073C11.601%206.16763%2011.7961%206.25063%2012%206.25063C12.2039%206.25063%2012.399%206.16763%2012.5404%206.02073L12%205.50063ZM15.0383%2018.9109L15.5026%2019.4999L15.0383%2018.9109ZM9.42605%2018.3219C7.91039%2017.1271%206.25307%2015.9603%204.93829%2014.4798C3.64922%2013.0282%202.75%2011.3345%202.75%209.1371H1.25C1.25%2011.8026%202.3605%2013.8361%203.81672%2015.4758C5.24723%2017.0866%207.07077%2018.3752%208.49742%2019.4999L9.42605%2018.3219ZM2.75%209.1371C2.75%206.98623%203.96537%205.18252%205.62436%204.42419C7.23607%203.68748%209.40166%203.88258%2011.4596%206.02073L12.5404%204.98053C10.0985%202.44352%207.26409%202.02539%205.00076%203.05996C2.78471%204.07292%201.25%206.42503%201.25%209.1371H2.75ZM8.49742%2019.4999C9.00965%2019.9037%209.55954%2020.3343%2010.1168%2020.6599C10.6739%2020.9854%2011.3096%2021.25%2012%2021.25V19.75C11.6904%2019.75%2011.3261%2019.6293%2010.8736%2019.3648C10.4213%2019.1005%209.95208%2018.7366%209.42605%2018.3219L8.49742%2019.4999ZM15.5026%2019.4999C16.9292%2018.3752%2018.7528%2017.0866%2020.1833%2015.4758C21.6395%2013.8361%2022.75%2011.8026%2022.75%209.1371H21.25C21.25%2011.3345%2020.3508%2013.0282%2019.0617%2014.4798C17.7469%2015.9603%2016.0896%2017.1271%2014.574%2018.3219L15.5026%2019.4999ZM22.75%209.1371C22.75%206.42503%2021.2153%204.07292%2018.9992%203.05996C16.7359%202.02539%2013.9015%202.44352%2011.4596%204.98053L12.5404%206.02073C14.5983%203.88258%2016.7639%203.68748%2018.3756%204.42419C20.0346%205.18252%2021.25%206.98623%2021.25%209.1371H22.75ZM14.574%2018.3219C14.0479%2018.7366%2013.5787%2019.1005%2013.1264%2019.3648C12.6739%2019.6293%2012.3096%2019.75%2012%2019.75V21.25C12.6904%2021.25%2013.3261%2020.9854%2013.8832%2020.6599C14.4405%2020.3343%2014.9903%2019.9037%2015.5026%2019.4999L14.574%2018.3219Z'%20fill='%23fffb'/%3e%3c/svg%3e",We={mixins:[Ne,qe,je],props:{item:{type:Object,required:!0}},data(){return{isSaved:!1,isFavorite:!1}},mounted(){this.isFavorite=this.checkFavorites(this.item.id)},computed:{poster(){return this.item.poster_path?`${O}/w370_and_h556_bestv2${this.item.poster_path}`:this.item.profile_path?`${O}/w370_and_h556_bestv2${this.item.profile_path}`:!1},media(){return this.item.media_type?this.item.media_type:this.item.name?"tv":"movie"}},methods:{getUserId(){var e;if(localStorage.getItem("user")!==null)return(e=JSON.parse(localStorage.getItem("user")).user)==null?void 0:e._id},async saveItem(){const e={user_id:this.getUserId(),id:this.item.id,media_type:this.media,title:this.item.title?this.item.title:this.item.name,poster_path:this.item.poster_path};try{const t=await A().addFavorite(e);this.item._id=t.data.favorite_id,this.isSaved=!0}catch(t){console.error("There was an error in saving favorite",t)}},async deleteItem(){try{await A().deleteFavorite(this.item._id,this.getUserId()),this.isSaved=!1}catch(e){console.error("There was an error in deleting favorite",e)}},checkFavorites(e){const t=JSON.parse(window.localStorage.getItem("favorites"))||[];return t?t.some(i=>{const s=i.id===e;return s&&(this.item._id=i._id),s}):!1}}},Fe={class:"card"},Oe={class:"card__img"},Ae={key:1},Re=b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24","fill-rule":"evenodd","clip-rule":"evenodd",fill:"#999"},[b("path",{d:"M24 22h-24v-20h24v20zm-1-19h-22v18h22v-18zm-1 16h-19l4-7.492 3 3.048 5.013-7.556 6.987 12zm-11.848-2.865l-2.91-2.956-2.574 4.821h15.593l-5.303-9.108-4.806 7.243zm-4.652-11.135c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5zm0 1c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5z"})],-1),Pe=[Re],Ve={class:"card__name"},Be={key:0,class:"card__rating"},De={key:0,class:"card__stars"},Ee={key:1,class:"card__vote"},He={class:"save-container"};function Ze(e,t,r,i,s,o){const n=ze,d=se;return _(),w("div",Fe,[ee(d,{class:"card__link",to:{name:`${o.media}-id`,params:{id:r.item.id}}},{default:te(()=>[b("div",Oe,[o.poster?(_(),ie(n,{key:0,src:o.poster,loading:"lazy",alt:e.name},null,8,["src","alt"])):(_(),w("span",Ae,Pe))]),b("h2",Ve,L(e.name),1),o.media!=="person"&&(e.stars||r.item.vote_average)?(_(),w("div",Be,[e.stars?(_(),w("div",De,[b("div",{style:re({width:`${e.stars}%`})},null,4)])):C("",!0),r.item.vote_average?(_(),w("div",Ee,L(e.rating.toFixed(1)),1)):C("",!0)])):C("",!0)]),_:1},8,["to"]),b("div",He,[s.isSaved||s.isFavorite?(_(),w("img",{key:0,onClick:t[0]||(t[0]=(...c)=>o.deleteItem&&o.deleteItem(...c)),src:Le,class:"heart-icon",alt:"Saved"})):(_(),w("img",{key:1,onClick:t[1]||(t[1]=(...c)=>o.saveItem&&o.saveItem(...c)),src:Ue,class:"heart-icon",alt:"Not Saved"}))])])}const nt=oe(We,[["render",Ze]]),at=(e,t)=>{let r=null;return function(...i){clearTimeout(r),r=setTimeout(()=>{e.apply(this,i)},t)}};export{nt as _,O as a,at as b,ot as c,st as d,ze as e,et as f,it as g,tt as h,Ne as n,Xe as r,qe as s,rt as t,A as u,Ke as y};
