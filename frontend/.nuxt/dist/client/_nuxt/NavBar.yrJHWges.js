import{_ as x}from"./nuxt-link.HmH_W_nj.js";import{H as M,r as u,f as q,c as r,J as P,M as A,o as h,a as s,b as p,w as f,m as c,N as k,O as I,d as S,h as d,t as y,q as L,v as D,F as N,k as U,p as B,e as O}from"./entry.vVFzJHlF.js";import{a as w}from"./axios.dHanLt5T.js";import{_ as j}from"./flix256-512.AvJu3248.js";import{_ as K}from"./_plugin-vue_export-helper.x3n3nnut.js";const z=M({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(i,{slots:e,attrs:l}){const a=u(!1);return q(()=>{a.value=!0}),_=>{var n;if(a.value)return(n=e.default)==null?void 0:n.call(e);const o=e.fallback||e.placeholder;if(o)return o();const m=_.fallback||_.placeholder||"",v=_.fallbackTag||_.placeholderTag||"span";return r(v,l,m)}}}),b=P("searchStore",{state:()=>({searchOpen:!1,fromPage:"/"}),actions:{toggleSearch(){this.searchOpen=!this.searchOpen},openSearch(){this.searchOpen=!0},closeSearch(){this.searchOpen=!1},setFromPage(i){this.fromPage=i}}}),C=P("auth",{state:()=>({userId:null,username:null,email:null,lang:null,isLoggedInState:!1}),getters:{isAuthenticated:i=>!!i.userId,isLoggedIn:i=>i.isLoggedInState},actions:{async register(i){try{const e=await w.post("/auth/signup",i);if(e.status!==201)throw new Error(`Registration failed: ${e.data}`);const l=e.data,a=await w.get(`/favorite/${l.user._id}`);this.setUserData(l,a.data.results)}catch(e){console.error("Registration error:",e)}},async login(i){try{const e=await w.post("/auth/login",{username:i});if(e.status!==200)throw new Error(`Login failed: ${e.data}`);const l=e.data,a=await w.get(`/favorite/${l.user._id}`);this.setUserData(l,a.data.results)}catch(e){console.error("Login error:",e)}},async delete(i){try{const e=await w.delete(`/users/${i}`);if(e.status>=300)throw new Error(`Account deletion failed: ${e.data}`);this.resetState()}catch(e){console.error("Login error:",e)}},async logout(){this.resetState()},setUserData(i,e){this.userId=i.userId,this.username=i.username,this.email=i.email,this.lang=i.lang,this.isLoggedInState=!0,localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("favorites",JSON.stringify(e))},resetState(){this.userId=null,this.username=null,this.email=null,this.lang=null,this.isLoggedInState=!1,localStorage.setItem("isLoggedIn","false"),localStorage.removeItem("user"),localStorage.removeItem("favorites")}}}),F=[{iso_639_1:"xx",english_name:"NA"},{iso_639_1:"aa",english_name:"Afar"},{iso_639_1:"af",english_name:"Afrikaans"},{iso_639_1:"ak",english_name:"Akan"},{iso_639_1:"an",english_name:"Aragonese"},{iso_639_1:"as",english_name:"Assamese"},{iso_639_1:"av",english_name:"Avaric"},{iso_639_1:"ae",english_name:"Avestan"},{iso_639_1:"ay",english_name:"Aymara"},{iso_639_1:"az",english_name:"Azerbaijani"},{iso_639_1:"ba",english_name:"Bashkir"},{iso_639_1:"bm",english_name:"Bambara"},{iso_639_1:"bi",english_name:"Bislama"},{iso_639_1:"bo",english_name:"Tibetan"},{iso_639_1:"br",english_name:"Breton"},{iso_639_1:"ca",english_name:"Catalan"},{iso_639_1:"cs",english_name:"Czech"},{iso_639_1:"ce",english_name:"Chechen"},{iso_639_1:"cu",english_name:"Slavic"},{iso_639_1:"cv",english_name:"Chuvash"},{iso_639_1:"kw",english_name:"Cornish"},{iso_639_1:"co",english_name:"Corsican"},{iso_639_1:"cr",english_name:"Cree"},{iso_639_1:"cy",english_name:"Welsh"},{iso_639_1:"da",english_name:"Danish"},{iso_639_1:"de",english_name:"German"},{iso_639_1:"dv",english_name:"Divehi"},{iso_639_1:"dz",english_name:"Dzongkha"},{iso_639_1:"eo",english_name:"Esperanto"},{iso_639_1:"et",english_name:"Estonian"},{iso_639_1:"eu",english_name:"Basque"},{iso_639_1:"fo",english_name:"Faroese"},{iso_639_1:"fj",english_name:"Fijian"},{iso_639_1:"fi",english_name:"Finnish"},{iso_639_1:"fr",english_name:"French"},{iso_639_1:"fy",english_name:"Frisian"},{iso_639_1:"ff",english_name:"Fulah"},{iso_639_1:"gd",english_name:"Gaelic"},{iso_639_1:"ga",english_name:"Irish"},{iso_639_1:"gl",english_name:"Galician"},{iso_639_1:"gv",english_name:"Manx"},{iso_639_1:"gn",english_name:"Guarani"},{iso_639_1:"gu",english_name:"Gujarati"},{iso_639_1:"ht",english_name:"Haitian; Haitian Creole"},{iso_639_1:"ha",english_name:"Hausa"},{iso_639_1:"sh",english_name:"Serbo-Croatian"},{iso_639_1:"hz",english_name:"Herero"},{iso_639_1:"ho",english_name:"Hiri Motu"},{iso_639_1:"hr",english_name:"Croatian"},{iso_639_1:"hu",english_name:"Hungarian"},{iso_639_1:"ig",english_name:"Igbo"},{iso_639_1:"io",english_name:"Ido"},{iso_639_1:"ii",english_name:"Yi"},{iso_639_1:"iu",english_name:"Inuktitut"},{iso_639_1:"ie",english_name:"Interlingue"},{iso_639_1:"ia",english_name:"Interlingua"},{iso_639_1:"id",english_name:"Indonesian"},{iso_639_1:"ik",english_name:"Inupiaq"},{iso_639_1:"is",english_name:"Icelandic"},{iso_639_1:"it",english_name:"Italian"},{iso_639_1:"jv",english_name:"Javanese"},{iso_639_1:"ja",english_name:"Japanese"},{iso_639_1:"kl",english_name:"Kalaallisut"},{iso_639_1:"kn",english_name:"Kannada"},{iso_639_1:"ks",english_name:"Kashmiri"},{iso_639_1:"kr",english_name:"Kanuri"},{iso_639_1:"kk",english_name:"Kazakh"},{iso_639_1:"km",english_name:"Khmer"},{iso_639_1:"ki",english_name:"Kikuyu"},{iso_639_1:"rw",english_name:"Kinyarwanda"},{iso_639_1:"ky",english_name:"Kirghiz"},{iso_639_1:"kv",english_name:"Komi"},{iso_639_1:"kg",english_name:"Kongo"},{iso_639_1:"ko",english_name:"Korean"},{iso_639_1:"kj",english_name:"Kuanyama"},{iso_639_1:"ku",english_name:"Kurdish"},{iso_639_1:"lo",english_name:"Lao"},{iso_639_1:"la",english_name:"Latin"},{iso_639_1:"lv",english_name:"Latvian"},{iso_639_1:"li",english_name:"Limburgish"},{iso_639_1:"ln",english_name:"Lingala"},{iso_639_1:"lt",english_name:"Lithuanian"},{iso_639_1:"lb",english_name:"Letzeburgesch"},{iso_639_1:"lu",english_name:"Luba-Katanga"},{iso_639_1:"lg",english_name:"Ganda"},{iso_639_1:"mh",english_name:"Marshall"},{iso_639_1:"ml",english_name:"Malayalam"},{iso_639_1:"mr",english_name:"Marathi"},{iso_639_1:"mg",english_name:"Malagasy"},{iso_639_1:"mt",english_name:"Maltese"},{iso_639_1:"mo",english_name:"Moldavian"},{iso_639_1:"mn",english_name:"Mongolian"},{iso_639_1:"mi",english_name:"Maori"},{iso_639_1:"ms",english_name:"Malay"},{iso_639_1:"my",english_name:"Burmese"},{iso_639_1:"na",english_name:"Nauru"},{iso_639_1:"nv",english_name:"Navajo"},{iso_639_1:"nr",english_name:"Ndebele"},{iso_639_1:"nd",english_name:"Ndebele"},{iso_639_1:"ng",english_name:"Ndonga"},{iso_639_1:"ne",english_name:"Nepali"},{iso_639_1:"nl",english_name:"Dutch"},{iso_639_1:"nn",english_name:"Norwegian Nynorsk"},{iso_639_1:"nb",english_name:"Norwegian Bokmål"},{iso_639_1:"no",english_name:"Norwegian"},{iso_639_1:"ny",english_name:"Chichewa; Nyanja"},{iso_639_1:"oc",english_name:"Occitan"},{iso_639_1:"oj",english_name:"Ojibwa"},{iso_639_1:"or",english_name:"Oriya"},{iso_639_1:"om",english_name:"Oromo"},{iso_639_1:"os",english_name:"Ossetian; Ossetic"},{iso_639_1:"pi",english_name:"Pali"},{iso_639_1:"pl",english_name:"Polish"},{iso_639_1:"pt",english_name:"Portuguese"},{iso_639_1:"qu",english_name:"Quechua"},{iso_639_1:"rm",english_name:"Raeto-Romance"},{iso_639_1:"ro",english_name:"Romanian"},{iso_639_1:"rn",english_name:"Rundi"},{iso_639_1:"ru",english_name:"Russian"},{iso_639_1:"sg",english_name:"Sango"},{iso_639_1:"sa",english_name:"Sanskrit"},{iso_639_1:"si",english_name:"Sinhalese"},{iso_639_1:"sk",english_name:"Slovak"},{iso_639_1:"sl",english_name:"Slovenian"},{iso_639_1:"se",english_name:"Northern Sami"},{iso_639_1:"sm",english_name:"Samoan"},{iso_639_1:"sn",english_name:"Shona"},{iso_639_1:"sd",english_name:"Sindhi"},{iso_639_1:"so",english_name:"Somali"},{iso_639_1:"st",english_name:"Sotho"},{iso_639_1:"es",english_name:"Spanish"},{iso_639_1:"sq",english_name:"Albanian"},{iso_639_1:"sc",english_name:"Sardinian"},{iso_639_1:"sr",english_name:"Serbian"},{iso_639_1:"ss",english_name:"Swati"},{iso_639_1:"su",english_name:"Sundanese"},{iso_639_1:"sw",english_name:"Swahili"},{iso_639_1:"sv",english_name:"Swedish"},{iso_639_1:"ty",english_name:"Tahitian"},{iso_639_1:"ta",english_name:"Tamil"},{iso_639_1:"tt",english_name:"Tatar"},{iso_639_1:"te",english_name:"Telugu"},{iso_639_1:"tg",english_name:"Tajik"},{iso_639_1:"tl",english_name:"Tagalog"},{iso_639_1:"th",english_name:"Thai"},{iso_639_1:"ti",english_name:"Tigrinya"},{iso_639_1:"to",english_name:"Tonga"},{iso_639_1:"tn",english_name:"Tswana"},{iso_639_1:"ts",english_name:"Tsonga"},{iso_639_1:"tk",english_name:"Turkmen"},{iso_639_1:"tr",english_name:"Turkish"},{iso_639_1:"tw",english_name:"Twi"},{iso_639_1:"ug",english_name:"Uighur"},{iso_639_1:"uk",english_name:"Ukrainian"},{iso_639_1:"ur",english_name:"Urdu"},{iso_639_1:"uz",english_name:"Uzbek"},{iso_639_1:"ve",english_name:"Venda"},{iso_639_1:"vi",english_name:"Vietnamese"},{iso_639_1:"vo",english_name:"Volapük"},{iso_639_1:"wa",english_name:"Walloon"},{iso_639_1:"wo",english_name:"Wolof"},{iso_639_1:"xh",english_name:"Xhosa"},{iso_639_1:"yi",english_name:"Yiddish"},{iso_639_1:"za",english_name:"Zhuang"},{iso_639_1:"zu",english_name:"Zulu"},{iso_639_1:"ab",english_name:"Abkhazian"},{iso_639_1:"zh",english_name:"Mandarin"},{iso_639_1:"ps",english_name:"Pushto"},{iso_639_1:"am",english_name:"Amharic"},{iso_639_1:"ar",english_name:"Arabic"},{iso_639_1:"bg",english_name:"Bulgarian"},{iso_639_1:"cn",english_name:"Cantonese"},{iso_639_1:"mk",english_name:"Macedonian"},{iso_639_1:"el",english_name:"Greek"},{iso_639_1:"fa",english_name:"Persian"},{iso_639_1:"he",english_name:"Hebrew"},{iso_639_1:"hi",english_name:"Hindi"},{iso_639_1:"hy",english_name:"Armenian"},{iso_639_1:"en",english_name:"English"},{iso_639_1:"ee",english_name:"Ewe"},{iso_639_1:"ka",english_name:"Georgian"},{iso_639_1:"pa",english_name:"Punjabi"},{iso_639_1:"bn",english_name:"Bengali"},{iso_639_1:"bs",english_name:"Bosnian"},{iso_639_1:"ch",english_name:"Chamorro"},{iso_639_1:"be",english_name:"Belarusian"},{iso_639_1:"yo",english_name:"Yoruba"}],V={data(){return{showDropdown:!1,showSearch:this.$route.name==="search",query:this.$route.query.q?this.$route.query.q:"",fromPage:b().fromPage,isLoggedIn:!1,showProfile:!1,showLogin:!1,showSignup:!1,languages:[...F],user:null}},watch:{$route(i,e){this.query=i.query.q||""}},mounted(){this.$refs.input.focus()},setup(){const i=C(),e=u(""),l=u(""),a=u(""),_=u(""),o=u(!1),m=u("");return typeof localStorage<"u"&&(localStorage.getItem("isLoggedIn")==="true"&&(o.value=!0,m.value=JSON.parse(localStorage.getItem("user"))),A(()=>i.isLoggedIn,g=>{o.value=g,localStorage.setItem("isLoggedIn",g)},()=>i.user)),typeof window<"u"&&window.addEventListener("storage",g=>{g.key==="isLoggedIn"&&(o.value=g.newValue==="true")}),{username:l,email:a,lang:_,isLoggedIn:o,user:m,signup:async()=>{if(!l.value||!a.value){console.error("Username and email are required");return}const g={userId:e.value,username:l.value,email:a.value,lang:_.value};try{await i.register(g),closePopup()}catch(T){console.error("Registration failed:",T)}},login:async()=>{if(!l.value){console.error("Username is required");return}try{await i.login(l.value),this.closePopup()}catch(g){console.error("Login failed:",g)}},deleteAccount:async()=>{try{await i.delete(m.value.user._id),closePopup()}catch(g){console.error("Account deletion failed:",g)}}}},methods:{toggleDropdown(){this.showDropdown=!this.showDropdown},handleDropdownItem(i){const e=C();i==="Profile"?this.showProfilePopup():(e.logout(),this.$router.push("/"))},handleFavorites(){this.$router.push({name:"favorites"})},toggleSearchInput(){this.showSearch=!this.showSearch},toggleSearchState(){b().toggleSearch()},goToRoute(){this.query?this.$route.name==="search"?this.$router.replace({query:{q:this.query}}):this.$router.push({name:"search",query:{q:this.query}}):this.$router.push({path:this.fromPage})},goBack(){this.query="",this.$router.push({path:this.fromPage})},unFocus(i){const e=b();if(this.$route.name!=="search"){const l=i.relatedTarget;(!l||!l.classList.contains("search-toggle"))&&(this.query="",e.closeSearch())}},showProfilePopup(){this.showProfile=!0,this.showLogin=!1,this.showSignup=!1},showLoginPopup(){this.showLogin=!0,this.showSignup=!1},showSignupPopup(){this.showSignup=!0,this.showLogin=!1},closePopup(){this.showProfile=!1,this.showLogin=!1,this.showSignup=!1}}},t=i=>(B("data-v-ef17a7cd"),i=i(),O(),i),E={class:"nav-bar"},H=t(()=>s("div",{class:"logo"},[s("img",{src:j,alt:"Flix256"})],-1)),R={class:"nav-links"},G={class:"search-user"},Z={class:"search-bar"},J=t(()=>s("path",{d:"M14.9536 14.9458L21 21M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"#fff","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),W=[J],Y=t(()=>s("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("g",{fill:"none",stroke:"#fff","stroke-width":"1.5","stroke-linecap":"round","stroke-miterlimit":"10","stroke-linejoin":"round"},[s("path",{d:"M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"}),s("path",{d:"M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"})])],-1)),Q={key:1,class:"popup profile-popup centered"},X=t(()=>s("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("g",{fill:"none",stroke:"#fff","stroke-width":"1.5","stroke-linecap":"round","stroke-miterlimit":"10","stroke-linejoin":"round"},[s("path",{d:"M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"}),s("path",{d:"M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"})])],-1)),$={key:0,class:"profile_data"},ee={class:"dropdown"},se={key:1,class:"login-signup-links"},ne=t(()=>s("span",{class:"separator"},"|",-1)),ie={key:1,class:"popup login-popup"},ae=t(()=>s("p",{class:"popup_title"},"LOGIN",-1)),oe={class:"form-group"},_e=t(()=>s("label",{for:"loginUsername"},"Username / Email",-1)),le=t(()=>s("button",{type:"submit"},"Login",-1)),te={key:2,class:"popup signup-popup"},re=t(()=>s("p",{class:"popup_title"},"SIGNUP",-1)),he={class:"form-group"},ge=t(()=>s("label",{for:"signupUsername"},"Username",-1)),me={class:"form-group"},ue=t(()=>s("label",{for:"signupEmail"},"Email (e.g johndoe@mail.com)",-1)),ce={class:"form-group"},de=t(()=>s("label",{for:"signupLanguage"},"Language",-1)),pe=t(()=>s("option",{value:"",disabled:""},"Select a language",-1)),fe=["value"],we=t(()=>s("button",{type:"submit"},"Signup",-1));function ve(i,e,l,a,_,o){const m=x,v=z;return h(),r("nav",E,[H,s("ul",R,[s("li",null,[p(m,{exact:"",to:{name:"index"},"active-class":"active-link","aria-label":"Home"},{default:f(()=>[S("Home")]),_:1})]),s("li",null,[p(m,{to:{name:"movie"},"active-class":"active-link","aria-label":"Movies"},{default:f(()=>[S("Movies")]),_:1})]),s("li",null,[p(m,{to:{name:"tv"},"active-class":"active-link","aria-label":"TV Shows"},{default:f(()=>[S("TV Shows")]),_:1})]),s("li",null,[p(m,{onClick:e[0]||(e[0]=n=>a.isLoggedIn?o.handleFavorites():o.showLoginPopup()),"active-class":"active-link","aria-label":"Favorites"},{default:f(()=>[S("Favorites")]),_:1})])]),s("div",G,[s("div",Z,[c(s("input",{id:"search",ref:"input","onUpdate:modelValue":e[1]||(e[1]=n=>_.query=n),name:"search",type:"text",placeholder:"Search for Movies and TV Shows",onKeyup:e[2]||(e[2]=(...n)=>o.goToRoute&&o.goToRoute(...n))},null,544),[[k,_.query,void 0,{trim:!0}],[I,_.showSearch]]),(h(),r("svg",{class:"search-icon",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:e[3]||(e[3]=(...n)=>o.toggleSearchInput&&o.toggleSearchInput(...n))},W))]),p(v,null,{default:f(()=>[a.isLoggedIn?(h(),r("div",{key:0,class:"user-icon",onClick:e[8]||(e[8]=(...n)=>o.toggleDropdown&&o.toggleDropdown(...n))},[Y,_.showProfile?(h(),r("div",{key:0,class:"overlay",onClick:e[4]||(e[4]=(...n)=>o.closePopup&&o.closePopup(...n))})):d("",!0),_.showProfile?(h(),r("div",Q,[X,a.user?(h(),r("div",$,[s("p",null,y(a.user.user.username),1),s("p",null,y(a.user.user.email),1),s("button",{onClick:e[5]||(e[5]=(...n)=>a.deleteAccount&&a.deleteAccount(...n))},"Delete Account")])):d("",!0)])):d("",!0),c(s("div",ee,[s("button",{onClick:e[6]||(e[6]=n=>o.handleDropdownItem("Profile"))},"Profile"),s("button",{onClick:e[7]||(e[7]=n=>o.handleDropdownItem("Logout"))},"Logout")],512),[[I,_.showDropdown]])])):(h(),r("div",se,[s("a",{onClick:e[9]||(e[9]=(...n)=>o.showLoginPopup&&o.showLoginPopup(...n)),"aria-label":"Login"},"Login"),ne,s("a",{onClick:e[10]||(e[10]=(...n)=>o.showSignupPopup&&o.showSignupPopup(...n)),"aria-label":"Signup"},"Signup"),_.showLogin||_.showSignup?(h(),r("div",{key:0,class:"overlay",onClick:e[11]||(e[11]=(...n)=>o.closePopup&&o.closePopup(...n))})):d("",!0),_.showLogin?(h(),r("div",ie,[s("form",{class:"popup_form",onSubmit:e[13]||(e[13]=L((...n)=>a.login&&a.login(...n),["prevent"]))},[ae,s("div",oe,[_e,c(s("input",{type:"text",id:"loginUsername","onUpdate:modelValue":e[12]||(e[12]=n=>a.username=n)},null,512),[[k,a.username]])]),le],32)])):d("",!0),_.showSignup?(h(),r("div",te,[s("form",{class:"popup_form",onSubmit:e[17]||(e[17]=L((...n)=>a.signup&&a.signup(...n),["prevent"]))},[re,s("div",he,[ge,c(s("input",{type:"text",id:"signupUsername",placeholder:"Username","onUpdate:modelValue":e[14]||(e[14]=n=>a.username=n)},null,512),[[k,a.username]])]),s("div",me,[ue,c(s("input",{type:"email",id:"signupEmail",placeholder:"Email","onUpdate:modelValue":e[15]||(e[15]=n=>a.email=n)},null,512),[[k,a.email]])]),s("div",ce,[de,c(s("select",{id:"signupLanguage","onUpdate:modelValue":e[16]||(e[16]=n=>a.lang=n)},[pe,(h(!0),r(N,null,U(_.languages,n=>(h(),r("option",{key:n.iso_639_1,value:n.iso_639_1},y(n.english_name),9,fe))),128))],512),[[D,a.lang]])]),we],32)])):d("",!0)]))]),_:1})])])}const Ce=K(V,[["render",ve],["__scopeId","data-v-ef17a7cd"]]);export{Ce as default};
