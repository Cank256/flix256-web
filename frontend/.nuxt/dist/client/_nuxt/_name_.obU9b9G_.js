import c from"./TopNav.rB4pLzdO.js";import{_ as l}from"./Listing.LtMO4-8Q.js";import{j as _,r as p,c as h,b as u,g,h as f,o as s}from"./entry.vVFzJHlF.js";import{u as i}from"./Functions.G-etegh6.js";import{_ as v}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./nuxt-link.HmH_W_nj.js";import"./axios.dHanLt5T.js";var D={};const y={components:{TopNav:c,Listing:l},data(){return{loading:!1}},setup(){const o=i(),e=_(),n=p(null),t=o.getListItem("movie",e.params.name).title;async function r(){try{const a=await o.getMovies(e.params.name);n.value=a.data}catch(a){console.error("There was an error in fetching data",a)}}return r(),{movieData:n,title:t}},head(){return{title:this.title,meta:[{hid:"og:title",property:"og:title",content:this.title},{hid:"og:url",property:"og:url",content:`${D.FRONTEND_URL}${this.$route.path}`}],bodyAttrs:{class:"topnav-active"}}},methods:{loadMore(){const o=i();this.loading=!0,o.getMovies(this.$route.params.name,{page:this.movieData.page+1}).then(e=>{this.movieData.results=this.movieData.results.concat(e.data.results),this.movieData.page=e.data.page,this.loading=!1}).catch(()=>{this.loading=!1})}}},L={class:"main"};function M(o,e,n,t,r,a){const m=c,d=l;return s(),h("main",L,[u(m,{title:t.title},null,8,["title"]),t.movieData&&t.movieData.results.length?(s(),g(d,{key:0,title:t.title,items:t.movieData,loading:r.loading,onLoadMore:a.loadMore},null,8,["title","items","loading","onLoadMore"])):f("",!0)])}const w=v(y,[["render",M]]);export{w as default};
