import u from"./TopNav.rB4pLzdO.js";import{_}from"./Listing.LtMO4-8Q.js";import{u as c}from"./Functions.G-etegh6.js";import{_ as p}from"./_plugin-vue_export-helper.x3n3nnut.js";import{r as l,f as m,c as f,b as h,g,h as v,o as d}from"./entry.vVFzJHlF.js";import"./nuxt-link.HmH_W_nj.js";import"./axios.dHanLt5T.js";var D={};const N={components:{TopNav:u,Listing:_},data(){return{loading:!1}},setup(){const o=c(),t=l(""),r=l("");return m(()=>{var s,n;r.value=JSON.parse(localStorage.getItem("user"));const e=((n=(s=r.value)==null?void 0:s.user)==null?void 0:n._id)||"";async function i(){try{const a=await o.getFavorites(e,{page:1});return t.value=a.data}catch(a){console.error("There was an error in fetching data",a)}}i()}),{favoritesData:t,userData:r}},head(){return{title:this.title,meta:[{hid:"og:title",property:"og:title",content:this.title},{hid:"og:url",property:"og:url",content:`${D.FRONTEND_URL}${this.$route.path}`}],bodyAttrs:{class:"topnav-active"}}},methods:{loadMore(){const o=c();this.loading=!0,o.getFavorites(this.userData._id,{page:this.favoritesData.page+1}).then(t=>{this.favoritesData.results=this.favoritesData.results.concat(t.data.results),this.favoritesData.page=t.data.page,this.loading=!1}).catch(()=>{this.loading=!1})}}},x={class:"main"};function y(o,t,r,e,i,s){const n=u,a=_;return d(),f("main",x,[h(n,{title:"Favorites"}),e.favoritesData&&e.favoritesData.results.length?(d(),g(a,{key:0,title:"Favorites",items:e.favoritesData,loading:i.loading,onLoadMore:s.loadMore},null,8,["items","loading","onLoadMore"])):v("",!0)])}const b=p(N,[["render",y]]);export{b as default};
